<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin - Quản lý Hướng Dẫn Viên (HDV)</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: #f4f6f8;
      }

      .card {
        border-radius: 12px;
      }

      .avatar {
        width: 96px;
        height: 96px;
        object-fit: cover;
        border-radius: 8px;
      }

      .chip {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 999px;
        background: #eef2ff;
        margin-right: 6px;
        margin-bottom: 6px;
      }

      .stat {
        font-weight: 700;
        font-size: 20px;
      }

      .small-muted {
        font-size: 13px;
        color: #6c757d;
      }
    </style>
  </head>

  <body>
    <div class="container py-4">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>Quản lý Danh sách Hướng Dẫn Viên (HDV)</h3>
        <div>
          <button class="btn btn-primary me-2" id="btnAdd">Thêm HDV</button>
          <button class="btn btn-outline-secondary" id="btnExport">
            Xuất CSV
          </button>
        </div>
      </div>

     

          <div class="card p-3">
            <h5>Chi tiết HDV</h5>
            <form id="hdvForm">
              <div class="row g-2">
                <div class="col-md-6 mb-2">
                  <label class="form-label">Họ tên</label>
                  <input id="name" type="text" class="form-control" required />
                </div>
                <div class="col-md-6 mb-2">
                  <label class="form-label">Ngày sinh</label>
                  <input id="dob" type="date" class="form-control" />
                </div>

                <div class="col-md-6 mb-2">
                  <label class="form-label">Số điện thoại</label>
                  <input id="phone" type="text" class="form-control" />
                </div>
                <div class="col-md-6 mb-2">
                  <label class="form-label">Email</label>
                  <input id="email" type="email" class="form-control" />
                </div>

                <div class="col-12 mb-2">
                  <label class="form-label">Ảnh (URL hoặc upload)</label>
                  <input
                    id="avatar"
                    type="text"
                    class="form-control"
                    placeholder="/mnt/data/your-image.png"
                  />
                </div>

                <div class="col-12 mb-2">
                  <label class="form-label">Chứng chỉ / Kinh nghiệm</label>
                  <textarea id="certs" class="form-control" rows="3"></textarea>
                </div>

                <div class="col-12 mb-2">
                  <label class="form-label">Ngôn ngữ</label>
                  <input
                    id="languages"
                    type="text"
                    class="form-control"
                    placeholder="Tiếng Việt, Tiếng Anh"
                  />
                  <div class="small-muted mt-1">Phân tách bằng dấu phẩy</div>
                </div>

                <div class="col-12 mb-2">
                  <label class="form-label">Lịch làm việc (mẫu JSON)</label>
                  <textarea id="schedule" class="form-control" rows="3">
[{"date":"2025-12-01","tour":"Tour A"}]</textarea
                  >
                  <div class="small-muted mt-1">
                    Dùng JSON để lưu nhiều lịch:
                    [{"date":"YYYY-MM-DD","tour":"Tên tour"}]
                  </div>
                </div>

                <div class="col-12 d-flex gap-2">
                  <button class="btn btn-success" type="submit">Lưu HDV</button>
                  <button
                    class="btn btn-outline-secondary"
                    type="button"
                    id="btnReset"
                  >
                    Reset
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- <script>
      // Demo data (thực tế: gọi API để lấy/luu)
      const data = [
        {
          id: 1,
          name: "Nguyễn Văn A",
          avatar: "/mnt/data/81290017-385a-4a78-99cf-e261d2f9eee0.png",
          langs: ["Tiếng Việt", "Tiếng Anh"],
          tours: 24,
          status: "active",
        },
        {
          id: 2,
          name: "Trần Thị B",
          avatar: "https://picsum.photos/80",
          langs: ["Tiếng Việt"],
          tours: 8,
          status: "active",
        },
        {
          id: 3,
          name: "Lê Văn C",
          avatar: "https://picsum.photos/81",
          langs: ["Tiếng Trung"],
          tours: 5,
          status: "inactive",
        },
      ];

      function renderTable() {
        const tbody = document.getElementById("hdvTable");
        tbody.innerHTML = "";
        data.forEach((h, i) => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
          <td>${h.id}</td>
          <td><img src="${
            h.avatar
          }" width="56" height="56" style="object-fit:cover;border-radius:8px"></td>
          <td>${h.name}</td>
          <td>${h.langs.join(", ")}</td>
          <td>${h.tours}</td>
          <td>${h.status}</td>
          <td><button class='btn btn-sm btn-outline-primary' onclick='selectHDV(${
            h.id
          })'>Xem / Sửa</button></td>
        `;
          tbody.appendChild(tr);
        });
      }

      function selectHDV(id) {
        const h = data.find((x) => x.id === id);
        if (!h) return;
        document.getElementById("hdvName").innerText = h.name;
        document.getElementById("selectedAvatar").src = h.avatar;
        document.getElementById("name").value = h.name;
        document.getElementById("dob").value = h.dob || "";
        document.getElementById("phone").value = h.phone || "";
        document.getElementById("email").value = h.email || "";
        document.getElementById("avatar").value = h.avatar;
        document.getElementById("certs").value = h.certs || "";
        document.getElementById("languages").value = h.langs.join(", ");
        document.getElementById("schedule").value = JSON.stringify(
          h.schedule || [],
          null,
          2
        );
        document.getElementById("toursCount").innerText = h.tours;
        document.getElementById("perfScore").innerText = h.perf || 75;
      }

      document
        .getElementById("hdvForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const obj = {
            name: document.getElementById("name").value,
            dob: document.getElementById("dob").value,
            phone: document.getElementById("phone").value,
            email: document.getElementById("email").value,
            avatar: document.getElementById("avatar").value,
            certs: document.getElementById("certs").value,
            langs: document
              .getElementById("languages")
              .value.split(",")
              .map((s) => s.trim()),
            schedule: JSON.parse(
              document.getElementById("schedule").value || "[]"
            ),
          };
          // Với demo, push vào data; thực tế gọi API POST/PUT
          obj.id = data.length + 1;
          obj.tours = 0;
          obj.status = "active";
          data.push(obj);
          renderTable();
          alert("Lưu HDV (demo) thành công");
        });

      document.getElementById("btnAdd").addEventListener("click", () => {
        document.getElementById("hdvForm").reset();
        document.getElementById("selectedAvatar").src =
          "/mnt/data/81290017-385a-4a78-99cf-e261d2f9eee0.png";
      });

      document.getElementById("btnSearch").addEventListener("click", () => {
        const q = document.getElementById("search").value.toLowerCase();
        const filtered = data.filter(
          (h) =>
            h.name.toLowerCase().includes(q) ||
            h.langs.join(" ").toLowerCase().includes(q)
        );
        const tbody = document.getElementById("hdvTable");
        tbody.innerHTML = "";
        filtered.forEach((h) => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
          <td>${h.id}</td>
          <td><img src="${
            h.avatar
          }" width="56" height="56" style="object-fit:cover;border-radius:8px"></td>
          <td>${h.name}</td>
          <td>${h.langs.join(", ")}</td>
          <td>${h.tours}</td>
          <td>${h.status}</td>
          <td><button class='btn btn-sm btn-outline-primary' onclick='selectHDV(${
            h.id
          })'>Xem / Sửa</button></td>
        `;
          tbody.appendChild(tr);
        });
      });

      // Khởi tạo
      renderTable();
      selectHDV(1);
    </script> -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
