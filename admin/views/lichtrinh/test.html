<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin - Quản lý Hướng Dẫn Viên (HDV)</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: #f4f6f8;
      }

      .card {
        border-radius: 12px;
      }

      .avatar {
        width: 96px;
        height: 96px;
        object-fit: cover;
        border-radius: 8px;
      }

      .chip {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 999px;
        background: #eef2ff;
        margin-right: 6px;
        margin-bottom: 6px;
      }

      .stat {
        font-weight: 700;
        font-size: 20px;
      }

      .small-muted {
        font-size: 13px;
        color: #6c757d;
      }
    </style>
  </head>

  <body>
    <div class="container py-4">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>Quản lý Danh sách Hướng Dẫn Viên (HDV)</h3>
        <div>
          <button class="btn btn-primary me-2" id="btnAdd">Thêm HDV</button>
          <button class="btn btn-outline-secondary" id="btnExport">
            Xuất CSV
          </button>
        </div>
      </div>

      <div class="row g-4">
        <div class="col-lg-4">
          <div class="card p-3">
            <div class="d-flex align-items-center mb-3">
              <img
                id="selectedAvatar"
                src="/mnt/data/81290017-385a-4a78-99cf-e261d2f9eee0.png"
                alt="avatar"
                class="avatar me-3"
              />
              <div>
                <h5 id="hdvName">Nguyễn Văn A</h5>
                <div class="small-muted">
                  Số tour đã dẫn: <strong id="toursCount">24</strong>
                </div>
              </div>
            </div>

            <div class="mb-3">
              <div class="stat" id="perfScore">85</div>
              <div class="small-muted">Điểm hiệu suất (điểm nội bộ)</div>
            </div>

            <div class="mb-3">
              <div class="small-muted">Kỹ năng & ngôn ngữ</div>
              <div id="tags" class="mt-2">
                <span class="chip">Tiếng Việt</span>
                <span class="chip">Tiếng Anh</span>
                <span class="chip">HDV nội địa</span>
              </div>
            </div>

            <div class="mb-3">
              <button class="btn btn-success w-100 mb-2" id="btnAssign">
                Phân công tour
              </button>
              <button class="btn btn-outline-danger w-100" id="btnDisable">
                Khóa tài khoản
              </button>
            </div>
          </div>

          <div class="card p-3 mt-3">
            <h6>Thống kê (30 ngày)</h6>
            <div class="d-flex justify-content-between mt-2">
              <div>
                <div class="small-muted">Số tour</div>
                <div class="stat">24</div>
              </div>
              <div>
                <div class="small-muted">Đánh giá TB</div>
                <div class="stat">4.6</div>
              </div>
              <div>
                <div class="small-muted">Ngày nghỉ</div>
                <div class="stat">2</div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-8">
          <div class="card p-3 mb-3">
            <h5>Danh sách HDV</h5>
            <div class="mb-2 small-muted">
              Tìm kiếm / lọc theo ngôn ngữ, chuyên tuyến, trạng thái
            </div>
            <div class="input-group mb-3">
              <input
                id="search"
                type="text"
                class="form-control"
                placeholder="Tìm tên, ngôn ngữ, chứng chỉ..."
              />
              <button class="btn btn-outline-secondary" id="btnSearch">
                Tìm
              </button>
            </div>

            <div class="table-responsive">
              <table class="table align-middle">
                <thead>
                  <tr>
                    <th>#</th>
                    <th>Ảnh</th>
                    <th>Tên</th>
                    <th>Ngôn ngữ</th>
                    <th>Số tour</th>
                    <th>Trạng thái</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody id="hdvTable">
                  <!-- Rows sẽ được render bằng JS -->
                </tbody>
              </table>
            </div>
          </div>

        

    <!-- <script>
      // Demo data (thực tế: gọi API để lấy/luu)
      const data = [
        {
          id: 1,
          name: "Nguyễn Văn A",
          avatar: "/mnt/data/81290017-385a-4a78-99cf-e261d2f9eee0.png",
          langs: ["Tiếng Việt", "Tiếng Anh"],
          tours: 24,
          status: "active",
        },
        {
          id: 2,
          name: "Trần Thị B",
          avatar: "https://picsum.photos/80",
          langs: ["Tiếng Việt"],
          tours: 8,
          status: "active",
        },
        {
          id: 3,
          name: "Lê Văn C",
          avatar: "https://picsum.photos/81",
          langs: ["Tiếng Trung"],
          tours: 5,
          status: "inactive",
        },
      ];

      function renderTable() {
        const tbody = document.getElementById("hdvTable");
        tbody.innerHTML = "";
        data.forEach((h, i) => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
          <td>${h.id}</td>
          <td><img src="${
            h.avatar
          }" width="56" height="56" style="object-fit:cover;border-radius:8px"></td>
          <td>${h.name}</td>
          <td>${h.langs.join(", ")}</td>
          <td>${h.tours}</td>
          <td>${h.status}</td>
          <td><button class='btn btn-sm btn-outline-primary' onclick='selectHDV(${
            h.id
          })'>Xem / Sửa</button></td>
        `;
          tbody.appendChild(tr);
        });
      }

      function selectHDV(id) {
        const h = data.find((x) => x.id === id);
        if (!h) return;
        document.getElementById("hdvName").innerText = h.name;
        document.getElementById("selectedAvatar").src = h.avatar;
        document.getElementById("name").value = h.name;
        document.getElementById("dob").value = h.dob || "";
        document.getElementById("phone").value = h.phone || "";
        document.getElementById("email").value = h.email || "";
        document.getElementById("avatar").value = h.avatar;
        document.getElementById("certs").value = h.certs || "";
        document.getElementById("languages").value = h.langs.join(", ");
        document.getElementById("schedule").value = JSON.stringify(
          h.schedule || [],
          null,
          2
        );
        document.getElementById("toursCount").innerText = h.tours;
        document.getElementById("perfScore").innerText = h.perf || 75;
      }

      document
        .getElementById("hdvForm")
        .addEventListener("submit", function (e) {
          e.preventDefault();
          const obj = {
            name: document.getElementById("name").value,
            dob: document.getElementById("dob").value,
            phone: document.getElementById("phone").value,
            email: document.getElementById("email").value,
            avatar: document.getElementById("avatar").value,
            certs: document.getElementById("certs").value,
            langs: document
              .getElementById("languages")
              .value.split(",")
              .map((s) => s.trim()),
            schedule: JSON.parse(
              document.getElementById("schedule").value || "[]"
            ),
          };
          // Với demo, push vào data; thực tế gọi API POST/PUT
          obj.id = data.length + 1;
          obj.tours = 0;
          obj.status = "active";
          data.push(obj);
          renderTable();
          alert("Lưu HDV (demo) thành công");
        });

      document.getElementById("btnAdd").addEventListener("click", () => {
        document.getElementById("hdvForm").reset();
        document.getElementById("selectedAvatar").src =
          "/mnt/data/81290017-385a-4a78-99cf-e261d2f9eee0.png";
      });

      document.getElementById("btnSearch").addEventListener("click", () => {
        const q = document.getElementById("search").value.toLowerCase();
        const filtered = data.filter(
          (h) =>
            h.name.toLowerCase().includes(q) ||
            h.langs.join(" ").toLowerCase().includes(q)
        );
        const tbody = document.getElementById("hdvTable");
        tbody.innerHTML = "";
        filtered.forEach((h) => {
          const tr = document.createElement("tr");
          tr.innerHTML = `
          <td>${h.id}</td>
          <td><img src="${
            h.avatar
          }" width="56" height="56" style="object-fit:cover;border-radius:8px"></td>
          <td>${h.name}</td>
          <td>${h.langs.join(", ")}</td>
          <td>${h.tours}</td>
          <td>${h.status}</td>
          <td><button class='btn btn-sm btn-outline-primary' onclick='selectHDV(${
            h.id
          })'>Xem / Sửa</button></td>
        `;
          tbody.appendChild(tr);
        });
      });

      // Khởi tạo
      renderTable();
      selectHDV(1);
    </script> -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
